<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>{% if page.title %}{{ page.title | escape }}{% else %}{{ site.title | escape }}{% endif %}</title>
  <meta name="description" content="{{ page.excerpt | default: site.description | strip_html | normalize_whitespace | truncate: 160 | escape }}">

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-PV39J3NR');</script>
  <!-- End Google Tag Manager -->

  <link rel="stylesheet" href="{{ "/assets/css/main.css" | relative_url }}">
  <link rel="canonical" href="{{ page.url | replace:'index.html','' | absolute_url }}">
  <link rel="alternate" type="application/rss+xml" title="{{ site.title | escape }}" href="{{ "/feed.xml" | relative_url }}">

  <!-- 언어별 hreflang 태그 -->
  {% if page.lang %}
    <link rel="alternate" hreflang="{{ page.lang }}" href="{{ page.url | absolute_url }}">
    {% assign current_page = page.url | remove: '.html' %}
    {% for language in site.languages %}
      {% unless language == page.lang %}
        {% assign translated_url = current_page | replace: '/' + page.lang + '/', '/' + language + '/' %}
        <link rel="alternate" hreflang="{{ language }}" href="{{ translated_url | absolute_url }}">
      {% endunless %}
    {% endfor %}
  {% endif %}

  <!-- Open Graph 추가 메타태그 -->
  <meta property="og:site_name" content="{{ site.title }}">
  <meta property="og:locale" content="{% if page.locale %}{{ page.locale }}{% else %}{{ site.lang | default: 'en_US' }}{% endif %}">
  {% if page.image %}
    <meta property="og:image" content="{{ page.image | absolute_url }}">
  {% elsif site.image %}
    <meta property="og:image" content="{{ site.image | absolute_url }}">
  {% endif %}
  
  <!-- Twitter Card -->
  <meta name="twitter:site" content="@{{ site.twitter.username }}">
  <meta name="twitter:creator" content="@{{ site.twitter.username }}">
  
  <!-- 추가 SEO 메타태그 -->
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="googlebot" content="index, follow">
  
  {% if page.tags %}
    <meta name="keywords" content="{{ page.tags | join: ', ' }}">
  {% endif %}
  
  {% seo %}
  
  <!-- 구조화 데이터 -->
  {% include structured-data.html %}
</head>